---
layout: single
title: "Comparing Fuzzy Hashes of Different Sizes of the Same Picture (SDHASH)"
date: '2012-09-10T10:20:00.002+09:00'
author: Joshua
tags:
- Fuzzy Hashing
- HowTo
modified_time: '2015-08-24T22:35:19.119+09:00'
thumbnail: http://4.bp.blogspot.com/-QVRarl5GFPU/UE02W6LzZHI/AAAAAAAAAnw/-qcA5WbQ8aU/s72-c/kitty_orig.jpeg
blogger_id: tag:blogger.com,1999:blog-2701259639305045003.single-2140181028550294440
blogger_orig_url: https://DFIR.Science/2012/09/comparing-fuzzy-hashes-of-different.html
---

In a <a href="https://DFIR.Science/2012/09/similarity-comparison-with-sdhash-fuzzy.html" target="_blank">previous single</a>, we looked at setting up and using <a href="http://sdhash.org/" target="_blank">SDHASH</a>. After comparing modified files and, and getting a high score for similarity, we started wondering how well fuzzy hashing works on different sized images. So today, we have a little experiment.<br /><br />First, we have 4 images. One original, and 3 smaller versions of the original.<br /><table cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://4.bp.blogspot.com/-QVRarl5GFPU/UE02W6LzZHI/AAAAAAAAAnw/-qcA5WbQ8aU/s1600/kitty_orig.jpeg" imageanchor="1" style="clear: left; margin-bottom: 1em; margin-left: auto; margin-right: auto;"><img border="0" src="http://4.bp.blogspot.com/-QVRarl5GFPU/UE02W6LzZHI/AAAAAAAAAnw/-qcA5WbQ8aU/s1600/kitty_orig.jpeg" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Original: 75K, MD5&nbsp;6d5663de34cd53e900d486a2c3b811fd</td></tr></tbody></table><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://4.bp.blogspot.com/-UTH4-l2A58M/UE02U8uSkmI/AAAAAAAAAnc/fMeCItSmmz8/s1600/kitty_2.jpeg" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" src="http://4.bp.blogspot.com/-UTH4-l2A58M/UE02U8uSkmI/AAAAAAAAAnc/fMeCItSmmz8/s1600/kitty_2.jpeg" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">&nbsp;1/2 Original: 44K, MD5&nbsp;87ec8d4b69293161bca25244ad4ff1ac</td></tr></tbody></table><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://2.bp.blogspot.com/-f6q4WBS76DY/UE02ViPEidI/AAAAAAAAAng/aqQt-pdHo4M/s1600/kitty_4.jpeg" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" src="http://2.bp.blogspot.com/-f6q4WBS76DY/UE02ViPEidI/AAAAAAAAAng/aqQt-pdHo4M/s1600/kitty_4.jpeg" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">1/4 Original: 14K, MD5&nbsp;978f28d7da1e7c1ba23490ed8e7e8384</td></tr></tbody></table><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/-L39gNWSKx38/UE02WGgISuI/AAAAAAAAAno/gJMPo_B18tc/s1600/kitty_8.jpeg" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" src="http://3.bp.blogspot.com/-L39gNWSKx38/UE02WGgISuI/AAAAAAAAAno/gJMPo_B18tc/s1600/kitty_8.jpeg" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">1/8 Original: 3.6K, MD5&nbsp;3e8e0d049be8938f579b04144d2c3594</td></tr></tbody></table>So, if we have an original image, we can take the hash like so:<br /><blockquote class="tr_bq">$sdhash kitty_orig.jpeg &gt; kitty_orig.sdbf</blockquote>Now, we want to take the hashes of other other files (manual way):<br /><blockquote class="tr_bq">$sdhash kitty_2.jpeg &gt;&gt; kitties.sdbf<br />$sdhash kitty_4.jpeg &gt;&gt; kitties.sdbf<br />$sdhash kitty_8.jpeg &gt;&gt; kitties.sdbf</blockquote>Now we can compare the hashes of the smaller versions to the hash of the original. <b>Note:</b>&nbsp;set the threshold to negative one (-t -1) if you want to see results below 1.<br /><blockquote class="tr_bq">$sdhash -t -1 -c kitty_orig.sdbf kitties.sdbf</blockquote>Unfortunately, but as expected, the results were not so good. Feature selection for the hash is done at the bit level, and those features do not carry over to smaller files since there are less bytes.<br /><blockquote class="tr_bq">kitty_2.jpeg|kitty_orig.jpeg|000<br />kitty_4.jpeg|kitty_orig.jpeg|000<br />kitty_8.jpeg|kitty_orig.jpeg|000&nbsp;</blockquote>If you were working with more images, and you wanted to hash and compare at the same time, you could use the -g switch. For example:<br /><blockquote class="tr_bq">$sdhash -t -1 -g *</blockquote>The output of which (in this case) would be:<br /><blockquote class="tr_bq">kitty_2.jpeg|kitty_4.jpeg|000<br />kitty_2.jpeg|kitty_8.jpeg|000<br />kitty_2.jpeg|kitty_orig.jpeg|000<br />kitty_4.jpeg|kitty_8.jpeg|000<br />kitty_4.jpeg|kitty_orig.jpeg|000<br />kitty_8.jpeg|kitty_orig.jpeg|000</blockquote>So, in conclusion, sdhash's feature selection does not allow for comparison of greatly different sized <i>picture</i>&nbsp;files. Note that a text file would be quite different, and would probably produce better results.