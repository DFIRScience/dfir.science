---
layout: single
title: "Sending a manually encrypted email using a public key"
date: '2013-08-15T16:18:00.001+09:00'
author: Joshua
tags:
- Education
- Encryption
- HowTo
modified_time: '2015-08-24T22:35:19.165+09:00'
blogger_id: tag:blogger.com,1999:blog-2701259639305045003.single-3913108984007021001
blogger_orig_url: https://DFIR.Science/2013/08/sending-manually-encrypted-email-using.html
---

Some web-based email services don't have an encryption client available, but if you still want to be able to encrypt an email using someone's public key, you can do it in the following way.<br /><br />First, get GPG.<br /><br /><ul><li>There is GPG4Win:&nbsp;<a href="http://www.gpg4win.org/">http://www.gpg4win.org/</a>&nbsp;(I've not used it, but I assume there is a command line client)</li><li>GPGTools for Mac:&nbsp;<a href="https://gpgtools.org/">https://gpgtools.org/</a>&nbsp;(I've used, and liked very well)</li><li>For Linux there are few different options, so see <a href="https://help.ubuntu.com/community/GnuPrivacyGuardHowto">this</a> for more information.</li></ul><br /><br />Once you have GPG installed, you should be able to run the command 'gpg' from a terminal.<br /><br />*note - On Windows or Mac the commands may be slightly different than what is shown here.<br /><br />For this tutorial, you will be encrypting an email using someone's <b>public</b>&nbsp;key. I will not show you how to create your own keys in this single.<br /><br />Once you can run gpg, we need to try to find the public key of the person you will send the message to. If they have uploaded their key to a public key server you can query the server with<br /><blockquote class="tr_bq">gpg --list-keys email@address.com</blockquote>You can then import the key you have found using --recv-keys with the key's ID. For example, my key looks like:<b> pub &nbsp; 2048R/606B15C4 2013-01-09 [expires: 2017-01-09]</b>. The key's ID is <b>606B15C4</b>.<br /><blockquote class="tr_bq">gpg --recv-keys 606B15C4&nbsp;</blockquote>Once we have successfully imported the key, we can use it to encrypt messages that only the holder of the associated <b>private</b> key can decrypt. So, for example, if you use my public key to encrypt a file, then only my private key can be used to decrypt the file.<br /><br />Likewise, if I use my private key to encrypt a file, then only my public key can be used to decrypt the file. This is a good way to show that you are the originator of the information.<br /><br />OK - so let's make some text to send in our email. I will create a text file as a simple file container.<br /><blockquote class="tr_bq">echo "Question: Can security students encrypt their email?" &gt;&gt; encryption_test.txt<br />echo "Hypothesis: Security students are too lazy to encrypt their email." &gt;&gt; encryption_test.txt  </blockquote>So now I have a plain text file called "encryption_test.txt" with two lines in it.<br /><br />(In Linux) I can read the contents of the file using 'cat', and pipe the output into gpg for encryption.<br /><blockquote class="tr_bq">cat encryption_test.txt | gpg --encrypt --armor -r 606B15C4</blockquote>The first command takes the contents of the file "encryption_test.txt" and send it to gpg, which encrypts the text with the public key 606B15C4. The output is as follows:<br /><br /><code>-----BEGIN PGP MESSAGE-----<br />Version: GnuPG v1.4.11 (GNU/Linux)<br /><br />hQEMA999TJtS1eU1AQgAn09ngR2pGDGCfFH0aKUazQInd+HtYqqFq6UmFyszb5RX<br />OS5mWB3gEKMh3Ki0Qvgs2tA9nBx1+uzyxvkLoXrLwkfVg7mu821bjkh9OMsFO9hb<br />EeKkZjAAHHcf1rkpWKgc9mcmYyaNBEexyDJy648osWiGyDfedVMKog0k44NFf9iG<br />aBNsrrqmS+S6SllCgUhbMtkJYB4+BbCBIDA0laWQF+wcKGIsQfk3XxYdJUAfTFIK<br />vJwKyyPd9JBwG70XYaycBVIPMYhflmNB0MKVV65iQXQslN0dlTMu9CZGRYDJ4IMD<br />eC89NDsSVwVBWGPxo76cE19McXC5EHQvEBZk9XUIY9KQAaqZOu8vJlz5kehprSnm<br />OsYY24fuvsbZ4tglgQQ2FC7QLwB+rMLXNWPXor/EjUUYfeRAtbADfpFgNX/Kyzf8<br />9CxHSRO0ARj/caQQHCjfothIcR6J+vSGe5z+QA9IG9LhvRYOQkbyqoz9ZxRmBgrG<br />zD++fpC+hgv56WRHe5BzSBq4iaYJ+M1FGb5YbpCBzrPI<br />=Umsn<br />-----END PGP MESSAGE-----<br /></code><br /><br />If I copy from ---BEGIN PGP MESSAGE --- to ---END PGP MESSAGE--- and paste that into the body of my email, and send it to the person who owns the private key - they should be able to decrypt it.<br /><br />