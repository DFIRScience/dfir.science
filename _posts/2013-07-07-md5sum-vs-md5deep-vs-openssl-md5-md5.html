---
layout: posts
title: "md5sum vs. md5deep vs. openssl md5: MD5 calculation speed test"
date: '2013-07-07T16:14:00.002+09:00'
author: Joshua
tags:
- Hashing
- HowTo
modified_time: '2015-08-24T22:35:19.376+09:00'
thumbnail: http://4.bp.blogspot.com/-o8u_Eid9RoM/Udj2k6wEa0I/AAAAAAAAAsk/GLWOXHQN0oU/s72-c/processing1processmd5.png
blogger_id: tag:blogger.com,1999:blog-2701259639305045003.single-8153540134064365440
blogger_orig_url: https://DFIR.Science/2013/07/md5sum-vs-md5deep-vs-openssl-md5-md5.html
---

<div>The following experiment is conducted to determine if md5sum, md5deep or openssl md5 hash calculations are faster than the others.</div><div><br /></div><b>Methodology:</b><br /><div><b>Test 1:</b> A directory of test files consisting of disk images and extracted Windows Registry files will be scanned with the command 'find -type f | xargs -n 1 <i>md5program</i>'. The output of this command will be fed into each program, respectively. The time for the entire process to finish will be tracked with the <a href="http://www.thegeekstuff.com/2012/01/time-command-examples/" target="_blank">time</a> command. Xargs is being used to feed each line of output to the md5 program.</div><div><b>Test 1.1:</b> After all programs have finished, the computer will be restarted, and the order the programs are ran in will be changed. For example, if md5sum was the first program in the first round, it will be the second program in the second round. This is to attempt to account for any caching that takes place in the operating system.</div><div><br /></div><div>The result will be 9 timed runs for calculating the md5 sum of all files in a directory.</div><div><br /></div><div><b>Test 2:</b> Big files - In test 1, multiple files of different sizes will be continuously fed to the hashing program. In test 2, a single 10 GB disk image will be given to each program and timed.</div><div><br /></div><div><b>Test machine:</b></div><div>Intel(R) Core(TM) i7-3537U CPU @ 2.00GHz (4 cores)</div><div>8 GB RAM</div><div>Timing cached reads: 8892.40 MB/sec</div><div><div>Timing buffered disk reads: 403.98 MB/sec</div></div><div><br /></div><div><b>Results:</b></div><div><table border="1" style="text-align: center;"><tbody><tr><td><b>md5sum, run 1</b></td><td><b>md5sum, run 2</b></td><td><b>md5sum, run 3</b></td></tr><tr><td>real 3m46.457s</td><td>real 3m46.117s</td><td>real 3m59.198s</td></tr><tr><td>user 0m42.183s</td><td>user 0m39.254s</td><td>user 0m42.235s</td></tr><tr><td>sys 3m3.595s</td><td>sys 3m6.300s</td><td>sys 3m16.096s</td></tr><tr><td><b>md5deep, run 1</b></td><td><b>md5deep, run 2</b></td><td><b>md5deep, run 3</b></td></tr><tr><td>real 3m57.595s</td><td>real 3m57.666s</td><td>real 4m2.255s</td></tr><tr><td>user 0m43.743s</td><td>user 0m43.567s</td><td>user 0m44.551s</td></tr><tr><td>sys 3m17.552s</td><td>sys 3m17.192s</td><td>sys 3m22.881s</td></tr><tr><td><b>openssl md5, run 1</b></td><td><b>openssl md5, run 2</b></td><td><b>openssl md5, run 3</b></td></tr><tr><td>real 3m48.130s</td><td>real 3m43.142s</td><td>real 3m50.619s</td></tr><tr><td>user 0m37.878s</td><td>user 0m37.462s</td><td>user 0m38.558s</td></tr><tr><td>sys 3m9.436s</td><td>sys 3m5.112s</td><td>sys 3m11.136s</td></tr></tbody></table><br />Overall processor time:<br />Run 1, md5sum 3m45.77s; md5deep 4m01.29s; openssl 3m47.32s.<br />Run 2: md5sum 3m45.55s; md5deep 4m00.76s; openssl 3m42.57s.<br />Run 3: md5sum 3m58.34s; md5deep 4m07.43s; openssl 3m49.7s.<br /><br />Average (rounded to second):<br />md5sum: 3m50s<br />md5deep: 4m03s<br />openssl: 3m46s<br /><br /><b>Test 1 Conclusions</b><br />While the 'real' time may be an interesting factor for investigators, what we are more interested in is the time that the program was using the processor. In this case 'user' is the time taken by the program in user mode, and sys is time in kernel mode. The basic idea is that we want a program that takes the least amount of time on the processor to do the same amount of work.<br /><br />Note: from the data it appears that another process, perhaps an OS update, was taking place that affected all the programs.<br /><br />Based on the average of the three runs, it appears that openssl is slightly faster, followed by md5sum and then md5deep.<br /><br />It should be noted, however, that md5deep is not really being used in the way it was designed. For example, md5sum does not include a recursive mode, where md5deep does. If we run md5deep using its recursive mode - instead of find and xargs - then the time is actually slightly better than the others:<br /><br />md5deep recursive - restricted to 1 thread<br />real 3m43.963s<br />user 0m41.327s<br />sys 3m2.103s <br /><br />md5deep: <b>3m43s</b><br /><b><br /></b>So, in conclusion, if you are are feeding a list of files into an md5 hash program, openssl appears to be a slightly better choice over md5sum and md5deep. However, if you can choose how the file list is ingested, md5deep is probably a better choice because of speed and available features.<br /><br /><b>Test 2:</b> Testing the time for each program to hash a 10 GB disk image. This test will not use find and xargs - it will use the program directly. md5deep will be restricted to 1 thread.<br /><br /><table border="1" style="text-align: center;"><tbody><tr><td><b>md5sum</b></td><td><b>md5deep</b></td><td><b>openssl md5</b></td></tr><tr><td>real 1m44.558s</td><td>real 1m49.491s</td><td>real 1m43.475s</td></tr><tr><td>user 0m19.369s</td><td>user 0m20.421s</td><td>user 0m18.233s</td></tr><tr><td>sys 1m24.877s</td><td>sys 1m30.534s</td><td>sys 1m24.889s</td></tr></tbody></table><br />md5sum: 1m44s<br />md5deep: 1m51s<br />openssl: 1m43s<br /><br />For a single large file, it appears that openssl is also the fastest, followed by md5sum and then md5deep.<br /><br />Please note: all of these tests are, at best, quite shallow. A proper testing environment with many more runs should be conducted.<br /><hr /><br />Bonus observation: As set, xargs will send 1 line to the hashing program and spawn 1 process. This process seems to switch between processors, even while the same hash is calculating.<br /><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-o8u_Eid9RoM/Udj2k6wEa0I/AAAAAAAAAsk/GLWOXHQN0oU/s1600/processing1processmd5.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="76" src="http://4.bp.blogspot.com/-o8u_Eid9RoM/Udj2k6wEa0I/AAAAAAAAAsk/GLWOXHQN0oU/s400/processing1processmd5.png" width="400" /></a></div><br />